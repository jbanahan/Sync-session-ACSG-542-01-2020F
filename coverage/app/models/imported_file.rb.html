<html>
  <head>
    <title>app/models/imported_file.rb</title>
    
    <link href="../../report.css?0.4725581163402244" media="screen" rel="stylesheet" type="text/css" />
    <script src='../../jquery.js?0.7111144523260686'></script>
    <script>
      $(function() {

        $('#toggle_test_file').click(function(e) {
          e.preventDefault();
          if ($('#main_file').hasClass('side_by_side')) {
            $('#main_file').removeClass('side_by_side');
          } else {
            $('#main_file').addClass('side_by_side');
          }
        
          $('#test_file').toggle();
        });

        $('#test_file').hide();
        
        function cleanString(str) {
          return $.trim(str.replace(/<[^(<|>)]+>/gi, ''));
        }
        
        $('.line_number').hover(function() {
          $(this).attr('title', 'Line: ' + cleanString($(this).html()));
        });
        
        $('.hit_number').hover(function() {
          $(this).attr('title', 'Execution Count: ' + cleanString($(this).html()));
        });
        
        $('.code_line').hover(function() {
          $(this).attr('title', cleanString($(this).html()));
        });
        
      });
    </script>
  </head>
  <body>
    <h1><a href="../../index.html">Coverage Report</a></h1>
    
    <table cellpadding='0' cellspacing='1'>
      <tr class='header'>
        <th>File</th>
        <th>Lines</th>
        <th>Lines Of Code</th>
        <th>Tested %</th>
      </tr>
      <tr valign='top'>
        <td>
          app/models/imported_file.rb
          
        </td>
        <td>185</td>
        <td>111</td>
        <td>79.3%</td>
      </tr>
    </table>

    <div>&nbsp;</div>
    
    <table cellpadding='0' cellspacing='1'>
      <tr>
        <th>Legend</th>
      </tr>
      <tr>
        <td class='hit'>This line was executed.</td>
      </tr>
      <tr>
        <td class='miss'>This line was not executed!</td>
      </tr>
      <tr>
        <td class='never'>This line doesn't matter.</td>
      </tr>
    </table>
    
    <div>&nbsp;</div>

    <div id='content'>
      <div id='main_file'>
        <table id='main'>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>1</td>
              <td class='code_line'>
                <pre>class ImportedFile < ActiveRecord::Base</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>2</td>
              <td class='code_line'>
                <pre>  </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>3</td>
              <td class='code_line'>
                <pre>  has_attached_file :attached,</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>4</td>
              <td class='code_line'>
                <pre>    :storage => :s3,</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>5</td>
              <td class='code_line'>
                <pre>    :s3_credentials => "#{Rails.root}/config/s3.yml",</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>6</td>
              <td class='code_line'>
                <pre>    :s3_permissions => :private,</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>7</td>
              <td class='code_line'>
                <pre>    :path => "#{MasterSetup.first.uuid}/imported_file/:id/:filename",</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>8</td>
              <td class='code_line'>
                <pre>    :bucket => 'chain-io'</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>9</td>
              <td class='code_line'>
                <pre>  before_post_process :no_post</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>10</td>
              <td class='code_line'>
                <pre>  </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>11</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>12</td>
              <td class='code_line'>
                <pre>  belongs_to :import_config</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>13</td>
              <td class='code_line'>
                <pre>    </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>14</td>
              <td class='code_line'>
                <pre>  def process(options={})</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>15</td>
              <td class='code_line'>
                <pre>    processor = options[:processor].nil? ? find_processor : options[:processor]</pre>
              </td>
              <td class='hit_number'>48</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>16</td>
              <td class='code_line'>
                <pre>    a_data = options[:attachment_data].nil? ? self.attachment_data : options[:attachment_data]</pre>
              </td>
              <td class='hit_number'>48</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>17</td>
              <td class='code_line'>
                <pre>    processor.new(self,a_data).process</pre>
              </td>
              <td class='hit_number'>48</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>18</td>
              <td class='code_line'>
                <pre>    return self.errors.size == 0</pre>
              </td>
              <td class='hit_number'>48</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>19</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>20</td>
              <td class='code_line'>
                <pre>  </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>21</td>
              <td class='code_line'>
                <pre>  def preview(options={})</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>22</td>
              <td class='code_line'>
                <pre>    processor = options[:processor].nil? ? OrderCSVImportProcessor : options[:processor]</pre>
              </td>
              <td class='hit_number'>8</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>23</td>
              <td class='code_line'>
                <pre>    a_data = options[:attachment_data].nil? ? self.attachment_data : options[:attachment_data]</pre>
              </td>
              <td class='hit_number'>8</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>24</td>
              <td class='code_line'>
                <pre>    processor.new(self,a_data).preview</pre>
              </td>
              <td class='hit_number'>8</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>25</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>26</td>
              <td class='code_line'>
                <pre>  </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>27</td>
              <td class='code_line'>
                <pre>  </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>28</td>
              <td class='code_line'>
                <pre>  def attachment_data</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>29</td>
              <td class='code_line'>
                <pre>    retries = 0</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>30</td>
              <td class='code_line'>
                <pre>    begin</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>31</td>
              <td class='code_line'>
                <pre>      uri = URI.parse(AWS::S3::S3Object.url_for attached.path, attached.options[:bucket], {:expires_in => 10.minutes, :use_ssl => true})</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>32</td>
              <td class='code_line'>
                <pre>      http = Net::HTTP.new(uri.host, uri.port)</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>33</td>
              <td class='code_line'>
                <pre>      http.use_ssl = true</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>34</td>
              <td class='code_line'>
                <pre>      http.verify_mode = OpenSSL::SSL::VERIFY_NONE</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>35</td>
              <td class='code_line'>
                <pre>      response = http.request(Net::HTTP::Get.new(uri.request_uri))</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>36</td>
              <td class='code_line'>
                <pre>      response.body</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>37</td>
              <td class='code_line'>
                <pre>    rescue</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>38</td>
              <td class='code_line'>
                <pre>      retries+=1</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>39</td>
              <td class='code_line'>
                <pre>      retry if retries < 3</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>40</td>
              <td class='code_line'>
                <pre>      raise "File data could not be retrieved from the database."</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>41</td>
              <td class='code_line'>
                <pre>    end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>42</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>43</td>
              <td class='code_line'>
                <pre>  </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>44</td>
              <td class='code_line'>
                <pre>  private</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>45</td>
              <td class='code_line'>
                <pre>  def find_processor   </pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>46</td>
              <td class='code_line'>
                <pre>    p = {</pre>
              </td>
              <td class='hit_number'>48</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>47</td>
              <td class='code_line'>
                <pre>    :Order => {:csv => OrderCSVImportProcessor},</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>48</td>
              <td class='code_line'>
                <pre>    :Product => {:csv => ProductCSVImportProcessor}</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>49</td>
              <td class='code_line'>
                <pre>    }</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>50</td>
              <td class='code_line'>
                <pre>    p[self.import_config.model_type.intern][self.import_config.file_type.intern]</pre>
              </td>
              <td class='hit_number'>48</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>51</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>52</td>
              <td class='code_line'>
                <pre>end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>53</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>54</td>
              <td class='code_line'>
                <pre>class CSVImportProcessor</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>55</td>
              <td class='code_line'>
                <pre>  </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>56</td>
              <td class='code_line'>
                <pre>  def initialize(import_file, data)</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>57</td>
              <td class='code_line'>
                <pre>    @import_file = import_file</pre>
              </td>
              <td class='hit_number'>56</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>58</td>
              <td class='code_line'>
                <pre>    @import_config = import_file.import_config</pre>
              </td>
              <td class='hit_number'>56</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>59</td>
              <td class='code_line'>
                <pre>    @core_module = CoreModule.find_by_class_name(@import_config.model_type)</pre>
              </td>
              <td class='hit_number'>56</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>60</td>
              <td class='code_line'>
                <pre>    @data = data</pre>
              </td>
              <td class='hit_number'>56</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>61</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>62</td>
              <td class='code_line'>
                <pre>  </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>63</td>
              <td class='code_line'>
                <pre>  def process</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>64</td>
              <td class='code_line'>
                <pre>    processed_row = false</pre>
              </td>
              <td class='hit_number'>48</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>65</td>
              <td class='code_line'>
                <pre>    begin</pre>
              </td>
              <td class='hit_number'>48</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>66</td>
              <td class='code_line'>
                <pre>      r = @import_config.ignore_first_row ? 1 : 0</pre>
              </td>
              <td class='hit_number'>48</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>67</td>
              <td class='code_line'>
                <pre>      CSV.parse(@data,{:skip_blanks=>true,:headers => @import_config.ignore_first_row}) do |row|</pre>
              </td>
              <td class='hit_number'>48</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>68</td>
              <td class='code_line'>
                <pre>        begin</pre>
              </td>
              <td class='hit_number'>48</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>69</td>
              <td class='code_line'>
                <pre>          do_row row, true</pre>
              </td>
              <td class='hit_number'>48</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>70</td>
              <td class='code_line'>
                <pre>        rescue => e</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>71</td>
              <td class='code_line'>
                <pre>          @import_file.errors[:base] << "Row #{r+1}: #{e.message}"</pre>
              </td>
              <td class='hit_number'>8</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>72</td>
              <td class='code_line'>
                <pre>        end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>73</td>
              <td class='code_line'>
                <pre>        r += 1</pre>
              </td>
              <td class='hit_number'>48</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>74</td>
              <td class='code_line'>
                <pre>      end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>75</td>
              <td class='code_line'>
                <pre>    rescue => e</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>76</td>
              <td class='code_line'>
                <pre>      @import_file.errors[:base] << "Row #{r+1}: #{e.message}"</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>77</td>
              <td class='code_line'>
                <pre>    end </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>78</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>79</td>
              <td class='code_line'>
                <pre>  </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>80</td>
              <td class='code_line'>
                <pre>  def preview</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>81</td>
              <td class='code_line'>
                <pre>    CSV.parse(@data,{:headers => @import_config.ignore_first_row}) do |row|</pre>
              </td>
              <td class='hit_number'>8</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>82</td>
              <td class='code_line'>
                <pre>      return do_row row, false</pre>
              </td>
              <td class='hit_number'>8</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>83</td>
              <td class='code_line'>
                <pre>    end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>84</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>85</td>
              <td class='code_line'>
                <pre>  </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>86</td>
              <td class='code_line'>
                <pre>  private</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>87</td>
              <td class='code_line'>
                <pre>  def do_row(row, save)</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>88</td>
              <td class='code_line'>
                <pre>    messages = []</pre>
              </td>
              <td class='hit_number'>56</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>89</td>
              <td class='code_line'>
                <pre>    o = @core_module.new_object</pre>
              </td>
              <td class='hit_number'>56</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>90</td>
              <td class='code_line'>
                <pre>    detail_hash = {}</pre>
              </td>
              <td class='hit_number'>56</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>91</td>
              <td class='code_line'>
                <pre>    detail_data_exists = {}</pre>
              </td>
              <td class='hit_number'>56</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>92</td>
              <td class='code_line'>
                <pre>    can_blank = []</pre>
              </td>
              <td class='hit_number'>56</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>93</td>
              <td class='code_line'>
                <pre>		custom_fields = []</pre>
              </td>
              <td class='hit_number'>56</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>94</td>
              <td class='code_line'>
                <pre>    @import_config.import_config_mappings.order("column_rank ASC").each do |m|</pre>
              </td>
              <td class='hit_number'>56</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>95</td>
              <td class='code_line'>
                <pre>      mf = m.find_model_field</pre>
              </td>
              <td class='hit_number'>184</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>96</td>
              <td class='code_line'>
                <pre>      can_blank << mf.field_name.to_s</pre>
              </td>
              <td class='hit_number'>184</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>97</td>
              <td class='code_line'>
                <pre>      to_send = object_to_send(detail_hash, o, mf)</pre>
              </td>
              <td class='hit_number'>184</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>98</td>
              <td class='code_line'>
                <pre>      data = row[m.column_rank-1]</pre>
              </td>
              <td class='hit_number'>184</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>99</td>
              <td class='code_line'>
                <pre>			if mf.custom?</pre>
              </td>
              <td class='hit_number'>184</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>100</td>
              <td class='code_line'>
                <pre>				custom_fields << {:field => mf, :data => data}</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>101</td>
              <td class='code_line'>
                <pre>			else</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>102</td>
              <td class='code_line'>
                <pre>				detail_data_exists[mf.core_module] = true if data.length > 0 && detail_field?(mf)</pre>
              </td>
              <td class='hit_number'>184</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>103</td>
              <td class='code_line'>
                <pre>				messages << mf.process_import(to_send,row[m.column_rank-1])</pre>
              </td>
              <td class='hit_number'>184</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>104</td>
              <td class='code_line'>
                <pre>			end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>105</td>
              <td class='code_line'>
                <pre>    end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>106</td>
              <td class='code_line'>
                <pre>    o = merge_or_create(o,save,{:can_blank => can_blank})</pre>
              </td>
              <td class='hit_number'>56</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>107</td>
              <td class='code_line'>
                <pre>    detail_hash.each {|core_module,d|</pre>
              </td>
              <td class='hit_number'>48</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>108</td>
              <td class='code_line'>
                <pre>      unless detail_data_exists[core_module].nil? </pre>
              </td>
              <td class='hit_number'>24</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>109</td>
              <td class='code_line'>
                <pre>        d = merge_or_create(d,save,{:can_blank => can_blank, :parent => o})</pre>
              </td>
              <td class='hit_number'>16</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>110</td>
              <td class='code_line'>
                <pre>      end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>111</td>
              <td class='code_line'>
                <pre>    }</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>112</td>
              <td class='code_line'>
                <pre>		custom_fields.each do |h|</pre>
              </td>
              <td class='hit_number'>48</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>113</td>
              <td class='code_line'>
                <pre>			obj = object_to_send(detail_hash,o,h[:field])</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>114</td>
              <td class='code_line'>
                <pre>			cd = CustomDefinition.find(h[:field].custom_id)</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>115</td>
              <td class='code_line'>
                <pre>			cv = obj.get_custom_value(cd)</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>116</td>
              <td class='code_line'>
                <pre>			cv.value = h[:data]</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>117</td>
              <td class='code_line'>
                <pre>			messages << "#{cd.label} set to #{cv.value}"</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>118</td>
              <td class='code_line'>
                <pre>			cv.save if save</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>119</td>
              <td class='code_line'>
                <pre>		end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>120</td>
              <td class='code_line'>
                <pre>    return messages</pre>
              </td>
              <td class='hit_number'>48</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>121</td>
              <td class='code_line'>
                <pre>  end </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>122</td>
              <td class='code_line'>
                <pre>  </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>123</td>
              <td class='code_line'>
                <pre>  def detail_field?(m_field)</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>124</td>
              <td class='code_line'>
                <pre>    m_field.core_module!=@core_module</pre>
              </td>
              <td class='hit_number'>352</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>125</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>126</td>
              <td class='code_line'>
                <pre>  </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>127</td>
              <td class='code_line'>
                <pre>  def object_to_send(d_hash,o,m_field)</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>128</td>
              <td class='code_line'>
                <pre>    return o if !detail_field?(m_field)</pre>
              </td>
              <td class='hit_number'>184</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>129</td>
              <td class='code_line'>
                <pre>    mcm = m_field.core_module</pre>
              </td>
              <td class='hit_number'>48</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>130</td>
              <td class='code_line'>
                <pre>    d_hash[mcm] =  mcm.new_object if d_hash[mcm].nil?</pre>
              </td>
              <td class='hit_number'>48</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>131</td>
              <td class='code_line'>
                <pre>    return d_hash[mcm]</pre>
              </td>
              <td class='hit_number'>48</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>132</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>133</td>
              <td class='code_line'>
                <pre>  </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>134</td>
              <td class='code_line'>
                <pre>  def merge_or_create(base,save,options={})</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>135</td>
              <td class='code_line'>
                <pre>    set_detail_parent base, options[:parent] unless options[:parent].nil?</pre>
              </td>
              <td class='hit_number'>72</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>136</td>
              <td class='code_line'>
                <pre>    dest = base.find_same</pre>
              </td>
              <td class='hit_number'>72</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>137</td>
              <td class='code_line'>
                <pre>    if dest.nil?</pre>
              </td>
              <td class='hit_number'>72</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>138</td>
              <td class='code_line'>
                <pre>      dest = base</pre>
              </td>
              <td class='hit_number'>40</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>139</td>
              <td class='code_line'>
                <pre>    else</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>140</td>
              <td class='code_line'>
                <pre>      before_merge base, dest</pre>
              </td>
              <td class='hit_number'>32</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>141</td>
              <td class='code_line'>
                <pre>      dest.shallow_merge_into base, options</pre>
              </td>
              <td class='hit_number'>24</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>142</td>
              <td class='code_line'>
                <pre>    end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>143</td>
              <td class='code_line'>
                <pre>    before_save dest</pre>
              </td>
              <td class='hit_number'>64</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>144</td>
              <td class='code_line'>
                <pre>    dest.save! if save</pre>
              </td>
              <td class='hit_number'>64</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>145</td>
              <td class='code_line'>
                <pre>    return dest</pre>
              </td>
              <td class='hit_number'>64</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>146</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>147</td>
              <td class='code_line'>
                <pre>  </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>148</td>
              <td class='code_line'>
                <pre>  def before_save(dest)</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>149</td>
              <td class='code_line'>
                <pre>    #do nothing</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>150</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>151</td>
              <td class='code_line'>
                <pre>  def set_detail_parent(detail,parent)</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>152</td>
              <td class='code_line'>
                <pre>    #default is no child objects so nothing to do here</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>153</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>154</td>
              <td class='code_line'>
                <pre>  </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>155</td>
              <td class='code_line'>
                <pre>  def before_merge(shell,database_object)</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>156</td>
              <td class='code_line'>
                <pre>    #default is no validations so nothing to do here</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>157</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>158</td>
              <td class='code_line'>
                <pre>end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>159</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>160</td>
              <td class='code_line'>
                <pre>class ProductCSVImportProcessor < CSVImportProcessor</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>161</td>
              <td class='code_line'>
                <pre>  def before_save(obj)</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>162</td>
              <td class='code_line'>
                <pre>    #default to first division in database</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>163</td>
              <td class='code_line'>
                <pre>    if obj.division_id.nil? </pre>
              </td>
              <td class='hit_number'>8</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>164</td>
              <td class='code_line'>
                <pre>      obj.division_id = Division.first.id</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>165</td>
              <td class='code_line'>
                <pre>    end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>166</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>167</td>
              <td class='code_line'>
                <pre>  </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>168</td>
              <td class='code_line'>
                <pre>  def before_merge(shell,database_object)</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>169</td>
              <td class='code_line'>
                <pre>    if !shell.vendor_id.nil? && shell.vendor_id != database_object.vendor_id</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="miss" data-hits='#{cov}'"">
              <td class='line_number'>170</td>
              <td class='code_line'>
                <pre>        raise "An product's vendor cannot be changed via a file upload."</pre>
              </td>
              <td class='hit_number'>0</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>171</td>
              <td class='code_line'>
                <pre>    end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>172</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>173</td>
              <td class='code_line'>
                <pre>end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>174</td>
              <td class='code_line'>
                <pre></pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>175</td>
              <td class='code_line'>
                <pre>class OrderCSVImportProcessor < CSVImportProcessor</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>176</td>
              <td class='code_line'>
                <pre>  def set_detail_parent(detail,parent)</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>177</td>
              <td class='code_line'>
                <pre>    detail.order = parent</pre>
              </td>
              <td class='hit_number'>16</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>178</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>179</td>
              <td class='code_line'>
                <pre>  </pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>180</td>
              <td class='code_line'>
                <pre>  def before_merge(shell,database_object)</pre>
              </td>
              <td class='hit_number'>9</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>181</td>
              <td class='code_line'>
                <pre>    if shell.class == Order && !shell.vendor_id.nil? && shell.vendor_id != database_object.vendor_id</pre>
              </td>
              <td class='hit_number'>32</td>
            </tr>
          
            <tr class="hit" data-hits='#{cov}'"">
              <td class='line_number'>182</td>
              <td class='code_line'>
                <pre>        raise "An order's vendor cannot be changed via a file upload."</pre>
              </td>
              <td class='hit_number'>8</td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>183</td>
              <td class='code_line'>
                <pre>    end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>184</td>
              <td class='code_line'>
                <pre>  end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
            <tr class="never" "">
              <td class='line_number'>185</td>
              <td class='code_line'>
                <pre>end</pre>
              </td>
              <td class='hit_number'></td>
            </tr>
          
        </table>
      </div>
      
    </div>
    
    <p>Generated on: 2011-03-24 23:50:38 -0600</p>
  </body>
</html>