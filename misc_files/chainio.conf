#Warnaco
server {
  server_name warnaco.vfitrack.net;
  root /home/ubuntu/chainio/warnaco/public;
  passenger_enabled on;
  passenger_min_instances 2;

  error_page 413 /error/413.html;
  location = /413.html {
    root /home/ubuntu/chainio/warnaco/public/error;
  }

	if ($http_x_forwarded_proto = "http") {
		rewrite ^(.*) https://warnaco.vfitrack.net$uri?;
	}
}
#Pepsi
server {
  server_name pepsi.vfitrack.net;
  root /home/ubuntu/chainio/pepsi/public;
  passenger_enabled on;
  passenger_min_instances 2;

  error_page 413 /error/413.html;
  location = /413.html {
    root /home/ubuntu/chainio/pepsi/public/error;
  }

	if ($http_x_forwarded_proto = "http") {
		rewrite ^(.*) https://pepsi.vfitrack.net$uri?;
	}
}
#Under Armour
server {
  server_name underarmour.vfitrack.net;
  root /home/ubuntu/chainio/underarmour/public;
  passenger_enabled on;
  passenger_min_instances 2;

  error_page 413 /error/413.html;
  location = /413.html {
    root /home/ubuntu/chainio/underarmour/public/error;
  }

	if ($http_x_forwarded_proto = "http") {
		rewrite ^(.*) https://underarmour.vfitrack.net$uri?;
	}
}
#Hat World
server {
  server_name hatworld.vfitrack.net;
  root /home/ubuntu/chainio/hatworld/public;
  passenger_enabled on;
  passenger_min_instances 2;

  error_page 413 /error/413.html;
  location = /413.html {
    root /home/ubuntu/chainio/hatworld/public/error;
  }

	if ($http_x_forwarded_proto = "http") {
		rewrite ^(.*) https://hatworld.vfitrack.net$uri?;
	}
}
#Genesco
server {
  server_name genesco.vfitrack.net;
  root /home/ubuntu/chainio/genesco/public;
  passenger_enabled on;
  passenger_min_instances 2;

  error_page 413 /error/413.html;
  location = /413.html {
    root /home/ubuntu/chainio/genesco/public/error;
  }

	if ($http_x_forwarded_proto = "http") {
		rewrite ^(.*) https://genesco.vfitrack.net$uri?;
	}
}
#DAS for Vandegrift
server {
  server_name das.vfitrack.net;
  root /home/ubuntu/chainio/dasvfitracknet/public;
  passenger_enabled on;
  passenger_min_instances 2;

  error_page 413 /error/413.html;
  location = /413.html {
    root /home/ubuntu/chainio/dasvfitracknet/public/error;
  }

  if ($http_x_forwarded_proto = "http") {
	rewrite ^(.*) https://das.vfitrack.net$uri?;
  }  
}
#Polo Instance
server {
	server_name polo.chain.io;
	root /home/ubuntu/chainio/polo/public;
	passenger_enabled on;
  passenger_min_instances 2;

    error_page 413 /error/413.html;
    location = /413.html {  
      root /home/ubuntu/chainio/polo/public/error;
    }

	if ($http_x_forwarded_proto = "http") {
		rewrite ^(.*) https://polo.chain.io$uri?;
	}
}

#Vandegrift Tracker Instance
server {
	server_name www.vfitrack.net www.vficanada.net;
	root /home/ubuntu/chainio/wwwvfitracknet/public;
	passenger_enabled on;
  passenger_min_instances 2;

    error_page 413 /error/413.html;
    location = /413.html {  
      root /home/ubuntu/chainio/wwwvfitracknet/public/error;
    }
	if ($http_x_forwarded_proto = "http") {
		rewrite ^(.*) https://www.vfitrack.net$uri?;
	}
}

#Vandegrift Demo Instance
server {
	server_name vdemo.chain.io;
	root /home/ubuntu/chainio/vdemo/public;
	passenger_enabled on;
  passenger_min_instances 2;

    error_page 413 /error/413.html;
    location = /413.html {  
      root /home/ubuntu/chainio/vdemo/public/error;
    }

	if ($http_x_forwarded_proto = "http") {
		rewrite ^(.*) https://vdemo.chain.io$uri?;
	}
}

#Brian's Demo Instance
server {
	listen 80 default;
	root /home/ubuntu/chainio/bdemo/public;
	passenger_enabled on;
	passenger_min_instances 2;

	error_page 413 /error/413.html;
	location = /413.html {  
		root /home/ubuntu/chainio/bdemo/public/error;
	}

	if ($http_x_forwarded_proto = "http") {
		rewrite ^(.*) https://bdemo.chain.io$uri?;
	}
}
#Boscov's Production
server {
	server_name boscovs.chain.io;
	root /home/ubuntu/chainio/boscovs/public;
	passenger_enabled on;
  passenger_min_instances 2;

    error_page 413 /error/413.html;
    location = /413.html {  
      root /home/ubuntu/chainio/boscovs/public/error;
    }

	if ($http_x_forwarded_proto = "http") {
		rewrite ^(.*) https://boscovs.chain.io$uri?;
	}
}
