# Baillie
server {
  server_name baillie.vfitrack.net;
  root /home/ubuntu/chainio/baillie/public;
  passenger_enabled on;
  passenger_min_instances 1;

  error_page 413 /error/413.html;

  location = /413.html {
    root /home/ubuntu/chainio/baillie/public/error;
  }

  if ($http_x_forwarded_proto = "http") {
    rewrite ^ https://baillie.vfitrack.net$request_uri?;
  }

  location ^~ /assets/ {
    add_header Expires "Thu, 31 Dec 2037 23:55:55 GMT";
    add_header Cache-Control "public, max-age=315360000";
    gzip_static on; # to serve pre-gzipped version
  }

  location ^~ /partials/ {
    add_header Cache-Control "no-cache, public";
  }
}
passenger_pre_start http://baillie.vfitrack.net/user_sessions/new;

# MBCI
server {
  server_name mbci.vfitrack.net;
  root /home/ubuntu/chainio/mbci/public;
  passenger_enabled on;
  passenger_min_instances 2;

  error_page 413 /error/413.html;

  location = /413.html {
    root /home/ubuntu/chainio/mbci/public/error;
  }

  if ($http_x_forwarded_proto = "http") {
    rewrite ^ https://mbci.vfitrack.net$request_uri?;
  }

  location ^~ /assets/ {
    add_header Expires "Thu, 31 Dec 2037 23:55:55 GMT";
    add_header Cache-Control "public, max-age=315360000";
    gzip_static on; # to serve pre-gzipped version
  }

  location ^~ /partials/ {
    add_header Cache-Control "no-cache, public";
  }
}
passenger_pre_start http://mbci.vfitrack.net/user_sessions/new;

# H&M
server {
  server_name hm.vfitrack.net;
  root /home/ubuntu/chainio/hm/public;
  passenger_enabled on;
  passenger_min_instances 1;

  error_page 413 /error/413.html;

  location = /413.html {
    root /home/ubuntu/chainio/hm/public/error;
  }

  if ($http_x_forwarded_proto = "http") {
    rewrite ^ https://hm.vfitrack.net$request_uri?;
  }

  location ^~ /assets/ {
    add_header Expires "Thu, 31 Dec 2037 23:55:55 GMT";
    add_header Cache-Control "public, max-age=315360000";
    gzip_static on; # to serve pre-gzipped version
  }

  location ^~ /partials/ {
    add_header Cache-Control "no-cache, public";
  }
}
passenger_pre_start http://hm.vfitrack.net/user_sessions/new;

#Lumber Liquidators
server {
  server_name ll.vfitrack.net;
  root /home/ubuntu/chainio/ll/public;
  passenger_enabled on;
  passenger_min_instances 2;

  error_page 413 /error/413.html;

  location = /413.html {
    root /home/ubuntu/chainio/ll/public/error;
  }

  if ($http_x_forwarded_proto = "http") {
    rewrite ^ https://ll.vfitrack.net$request_uri?;
  }

  location ^~ /assets/ {
    add_header Expires "Thu, 31 Dec 2037 23:55:55 GMT";
    add_header Cache-Control "public, max-age=315360000";
    gzip_static on; # to serve pre-gzipped version
  }

  location ^~ /partials/ {
    add_header Cache-Control "no-cache, public";
  }
}
passenger_pre_start http://ll.vfitrack.net/user_sessions/new;

server {
  server_name ll-test.vfitrack.net ll-test-origin.vfitrack.net;
  root /home/ubuntu/chainio/ll-test/public;
  passenger_enabled on;

  error_page 413 /error/413.html;
  location = /413.html {
    root /home/ubuntu/chainio/ll-test/public/error;
  }

  if ($http_x_forwarded_proto = "http") {
    rewrite ^ https://ll-test.vfitrack.net$request_uri?;
  }

  location ^~ /assets/ {
    add_header Expires "Thu, 31 Dec 2037 23:55:55 GMT";
    add_header Cache-Control "public, max-age=315360000";
    gzip_static on; # to serve pre-gzipped version
  }

  location ^~ /partials/ {
    add_header Cache-Control "no-cache, public";
  }
}

#Rhee Bros
server {
  server_name rhee.vfitrack.net;
  root /home/ubuntu/chainio/rhee/public;
  passenger_enabled on;
  passenger_min_instances 1;

  error_page 413 /error/413.html;

  location = /413.html {
    root /home/ubuntu/chainio/rhee/public/error;
  }

  if ($http_x_forwarded_proto = "http") {
    rewrite ^ https://rhee.vfitrack.net$request_uri?;
  }

  location ^~ /assets/ {
    add_header Expires "Thu, 31 Dec 2037 23:55:55 GMT";
    add_header Cache-Control "public, max-age=315360000";
    gzip_static on; # to serve pre-gzipped version
  }

  location ^~ /partials/ {
    add_header Cache-Control "no-cache, public";
  }
}
passenger_pre_start http://rhee.vfitrack.net/user_sessions/new;

#J Crew
server {
  server_name jcrew.vfitrack.net;
  root /home/ubuntu/chainio/jcrew/public;
  passenger_enabled on;
  passenger_min_instances 1;

  error_page 413 /error/413.html;

  location = /413.html {
    root /home/ubuntu/chainio/jcrew/public/error;
  }

  if ($http_x_forwarded_proto = "http") {
    rewrite ^ https://jcrew.vfitrack.net$request_uri?;
  }

  location ^~ /assets/ {
    add_header Expires "Thu, 31 Dec 2037 23:55:55 GMT";
    add_header Cache-Control "public, max-age=315360000";
    gzip_static on; # to serve pre-gzipped version
  }

  location ^~ /partials/ {
    add_header Cache-Control "no-cache, public";
  }
}
passenger_pre_start http://jcrew.vfitrack.net/user_sessions/new;

#Ann Inc
server {
  server_name ann.vfitrack.net;
  root /home/ubuntu/chainio/ann/public;
  passenger_enabled on;
  passenger_min_instances 2;

  error_page 413 /error/413.html;

  location = /413.html {
    root /home/ubuntu/chainio/ann/public/error;
  }

  if ($http_x_forwarded_proto = "http") {
    rewrite ^ https://ann.vfitrack.net$request_uri?;
  }

  location ^~ /assets/ {
    add_header Expires "Thu, 31 Dec 2037 23:55:55 GMT";
    add_header Cache-Control "public, max-age=315360000";
    gzip_static on; # to serve pre-gzipped version
  }

  location ^~ /partials/ {
    add_header Cache-Control "no-cache, public";
  }
}
passenger_pre_start http://ann.vfitrack.net/user_sessions/new;

# Ann Test
server {
  server_name ann-test.vfitrack.net;
  root /home/ubuntu/chainio/ann-test/public;
  passenger_enabled on;

  error_page 413 /error/413.html;

  location = /413.html {
    root /home/ubuntu/chainio/ann-test/public/error;
  }

  if ($http_x_forwarded_proto = "http") {
    rewrite ^ https://ann-test.vfitrack.net$request_uri?;
  }

  location ^~ /assets/ {
    add_header Expires "Thu, 31 Dec 2037 23:55:55 GMT";
    add_header Cache-Control "public, max-age=315360000";
    gzip_static on; # to serve pre-gzipped version
  }

  location ^~ /partials/ {
    add_header Cache-Control "no-cache, public";
  }
}

#Pepsi
server {
  server_name pepsi.vfitrack.net;
  root /home/ubuntu/chainio/pepsi/public;
  passenger_enabled on;
  passenger_min_instances 2;

  error_page 413 /error/413.html;

  location = /413.html {
    root /home/ubuntu/chainio/pepsi/public/error;
  }

  if ($http_x_forwarded_proto = "http") {
    rewrite ^ https://pepsi.vfitrack.net$request_uri?;
  }

  location ^~ /assets/ {
    add_header Expires "Thu, 31 Dec 2037 23:55:55 GMT";
    add_header Cache-Control "public, max-age=315360000";
    gzip_static on; # to serve pre-gzipped version
  }

  location ^~ /partials/ {
    add_header Cache-Control "no-cache, public";
  }
}
passenger_pre_start http://pepsi.vfitrack.net/user_sessions/new;

# Pepsi Test
server {
  server_name pepsitest.vfitrack.net;
  root /home/ubuntu/chainio/pepsitest/public;
  passenger_enabled on;

  error_page 413 /error/413.html;

  location = /413.html {
    root /home/ubuntu/chainio/pepsitest/public/error;
  }

  if ($http_x_forwarded_proto = "http") {
    rewrite ^ https://pepsitest.vfitrack.net$request_uri?;
  }

  location ^~ /assets/ {
    add_header Expires "Thu, 31 Dec 2037 23:55:55 GMT";
    add_header Cache-Control "public, max-age=315360000";
    gzip_static on; # to serve pre-gzipped version
  }

  location ^~ /partials/ {
    add_header Cache-Control "no-cache, public";
  }
}

#Under Armour
server {
  server_name underarmour.vfitrack.net;
  root /home/ubuntu/chainio/underarmour/public;
  passenger_enabled on;
  passenger_min_instances 2;

  error_page 413 /error/413.html;

  location = /413.html {
    root /home/ubuntu/chainio/underarmour/public/error;
  }

  if ($http_x_forwarded_proto = "http") {
    rewrite ^ https://underarmour.vfitrack.net$request_uri?;
  }

  location ^~ /assets/ {
    add_header Expires "Thu, 31 Dec 2037 23:55:55 GMT";
    add_header Cache-Control "public, max-age=315360000";
    gzip_static on; # to serve pre-gzipped version
  }

  location ^~ /partials/ {
    add_header Cache-Control "no-cache, public";
  }
}
passenger_pre_start http://underarmour.vfitrack.net/user_sessions/new;

#DAS for Vandegrift
server {
  server_name das.vfitrack.net;
  root /home/ubuntu/chainio/dasvfitracknet/public;
  passenger_enabled on;
  passenger_min_instances 1;

  error_page 413 /error/413.html;

  location = /413.html {
    root /home/ubuntu/chainio/dasvfitracknet/public/error;
  }

  if ($http_x_forwarded_proto = "http") {
    rewrite ^ https://das.vfitrack.net$request_uri?;
  }

  location ^~ /assets/ {
    add_header Expires "Thu, 31 Dec 2037 23:55:55 GMT";
    add_header Cache-Control "public, max-age=315360000";
    gzip_static on; # to serve pre-gzipped version
  }

  location ^~ /partials/ {
    add_header Cache-Control "no-cache, public";
  }
}
passenger_pre_start http://das.vfitrack.net/user_sessions/new;

#Polo Instance
server {
  server_name polo.vfitrack.net polo.chain.io;
  root /home/ubuntu/chainio/polo/public;
  passenger_enabled on;
  passenger_min_instances 2;

  error_page 413 /error/413.html;

  location = /413.html {
    root /home/ubuntu/chainio/polo/public/error;
  }

  if ($http_x_forwarded_proto = "http") {
    rewrite ^ https://polo.vfitrack.net$request_uri?;
  }

  location ^~ /assets/ {
    add_header Expires "Thu, 31 Dec 2037 23:55:55 GMT";
    add_header Cache-Control "public, max-age=315360000";
    gzip_static on; # to serve pre-gzipped version
  }

  location ^~ /partials/ {
    add_header Cache-Control "no-cache, public";
  }
}
passenger_pre_start http://polo.vfitrack.net/user_sessions/new;

#Polo Test Instance
server {
  server_name polotest.vfitrack.net;
  root /home/ubuntu/chainio/polotest/public;
  passenger_enabled on;
  passenger_min_instances 2;

  error_page 413 /error/413.html;

  location = /413.html {
    root /home/ubuntu/chainio/polotest/public/error;
  }

  if ($http_x_forwarded_proto = "http") {
    rewrite ^ https://polotest.vfitrack.net$request_uri?;
  }

  location ^~ /assets/ {
    add_header Expires "Thu, 31 Dec 2037 23:55:55 GMT";
    add_header Cache-Control "public, max-age=315360000";
    gzip_static on; # to serve pre-gzipped version
  }

  location ^~ /partials/ {
    add_header Cache-Control "no-cache, public";
  }
}

#Demo Instance
server {
  server_name bdemo.chain.io bdemo.vfitrack.net;
  root /home/ubuntu/chainio/bdemo/public;
  passenger_enabled on;

  error_page 413 /error/413.html;

  location = /413.html {
    root /home/ubuntu/chainio/bdemo/public/error;
  }

  if ($http_x_forwarded_proto = "http") {
    rewrite ^ https://bdemo.vfitrack.net$request_uri?;
  }

  location ^~ /assets/ {
    add_header Expires "Thu, 31 Dec 2037 23:55:55 GMT";
    add_header Cache-Control "public, max-age=315360000";
    gzip_static on; # to serve pre-gzipped version
  }

  location ^~ /partials/ {
    add_header Cache-Control "no-cache, public";
  }
}

#Vandegrift Tracker Instance
server {
  listen 80 default_server;
  root /home/ubuntu/chainio/wwwvfitracknet/public;
  passenger_enabled on;
  passenger_min_instances 2;

  error_page 413 /error/413.html;

  location = /413.html {
    root /home/ubuntu/chainio/wwwvfitracknet/public/error;
  }

  if ($http_x_forwarded_proto = "http") {
    rewrite ^ https://www.vfitrack.net$request_uri?;
  }

  location ^~ /assets/ {
    add_header Expires "Thu, 31 Dec 2037 23:55:55 GMT";
    add_header Cache-Control "public, max-age=315360000";
    gzip_static on; # to serve pre-gzipped version
  }

  location ^~ /partials/ {
    add_header Cache-Control "no-cache, public";
  }
}

passenger_pre_start http://www.vfitrack.net/user_sessions/new;
