(function(){var a;a="undefined"!=typeof exports&&null!==exports?exports:this,a.ChainNavPanel={write:function(a,b,c,d){var e,f,g,h,i;return f=function(){return $(document).on("keyup",function(a){if(!$(a.target).is(":input"))switch(a.keyCode){case 191:return $(".search-query:visible:first").focus();case 77:return $('[data-toggle="offcanvas"]:first').click(),$("#sidebar:visible .list-group-item:first").focus();case 78:return $('[data-toggle="notification-center"]:first').click();case 27:return $("#notification-center:visible")&&$("#notification-center").modal("hide"),$(".sidebar-offcanvas").removeClass("active")}})},h=function(){return $('[data-toggle="offcanvas"]').click(function(){return $(".sidebar-offcanvas").toggleClass("active")})},i=function(a){var b;return $("#sidebar-loading").remove(),b=ChainNavPanel.MenuBuilder().createMenuObject(a),ChainNavPanel.MenuWriter().writeMenu($("#sidebar"),b)},g=function(){return $("#set-homepage-btn").click(function(a){return $.post("/users/set_homepage",{homepage:$(location).attr("href")})}),$("#nav-set-homepage").click(function(a){return a.preventDefault(),$("#homepage-modal").modal("show")})},e=function(a){return a($("#notification-center-wrapper"))},$(b).after(a["src/html/nav_panel.html"]),$(b).remove(),f(),c.then(function(a){return i(a)}),h(),g(),d?e(d):void 0}}}).call(this);var ChainNavPanelHtml=ChainNavPanelHtml||{};ChainNavPanelHtml["src/html/nav_panel.html"]="<div id='chain-nav-panel'>\n  <form class='form-inline form visible-xs' role='search' action='/quick_search' method='GET' id='mini-qs'>\n    <div class=\"container-fluid\" id='mini-qs-container'>\n      <div class=\"row\">\n        <div class=\"col-xs-11\">\n          <input type='text' class='search-query form-control' placeholder='Quick Search' data-toggle='tooltip' title='press / to jump here' name='v' />\n        </div>\n        <div class='col-xs-1'>\n          <a href='#' onclick=\"$('#mini-qs').submit(); return false;\">\n            <i class='fa fa-search'></i>\n          </a>\n        </div>\n      </div>\n    </div>\n  </form>\n  <div class='navbar' role='navigation' id='topnav'>\n    <ul class=\"nav navbar-nav navbar-left pull-left\" style='margin-left:3px;'>\n      <li>\n        <button id='btn-left-toggle' class='navbar-toggle' data-toggle=\"offcanvas\" title=\"shortcut key: m\">\n          <span class=\"sr-only\">Toggle navigation</span>\n          <span class=\"icon-bar\"></span>\n          <span class=\"icon-bar\"></span>\n          <span class=\"icon-bar\"></span>\n        </button>\n      </li>\n    </ul>\n    <ul class=\"nav navbar-nav navbar-right pull-right\"  style='margin-right:3px;'>\n      <li id='notification-center-wrapper'>\n      </li>\n    </ul>\n    <form class='navbar-form hidden-xs' role='search' action='/quick_search' method='GET' id='quicksearch'>\n      <div class='form-group'>\n        <input type='text' class='search-query form-control' placeholder='enter search term' data-toggle='tooltip' title='shortcut key: /' name='v' id='quick_search_input' />\n        &nbsp;\n        <a href='#' onclick=\"$('#quicksearch').submit(); return false;\">\n          <i class='fa fa-search'></i>\n        </a>\n      </div>\n    </form>\n  </div>\n  <div class=\"sidebar-offcanvas panel-group\" id=\"sidebar\">\n    <a href='/' title='Home' class='list-group-item'>Home</a>\n    <div id='sidebar-loading'>\n      Please wait while your personalized menu is generated.\n    </div>\n  </div>\n</div>\n<div class=\"modal fade\" id=\"homepage-modal\">\n  <div class=\"modal-dialog\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\"><h4 class=\"modal-title\">Set Homepage To Current Page</h4></div>\n      <div class=\"modal-body\">\n        <p>Click \"OK\" to make this page the first one you see when you log in to VFI Track.</p>\n        <p>You may also access your homepage at any time by clicking the Home link on the navigation bar.</p>\n      </div>\n      <div class=\"modal-footer\">\n        <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Cancel</button>\n        <button type=\"button\" class=\"btn btn-primary\" data-dismiss=\"modal\" id=\"set-homepage-btn\">OK</button>\n      </div>\n    </div>\n  </div>\n</div>\n<div class=\"modal fade\" id=\"notification-center\">\n  <div class=\"modal-dialog modal-max-width\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header text-center\">\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">&times;</button>\n        <div class=\"btn-group\">\n          <button type=\"button\" class=\"btn btn-default\" notification-center-toggle-target='messages'>Messages</button>\n          <button type=\"button\" class=\"btn btn-default\" notification-center-toggle-target='tasks'>Tasks</button>\n          <button type=\"button\" class=\"btn btn-default\" notification-center-toggle-target='manuals'>Manuals</button>\n        </div>\n      </div>\n      <div class=\"modal-body\" id='notification-center-body'>\n        <div notification-center-pane='messages' content-url='/messages'></div>\n        <div notification-center-pane='tasks' content-url='/my_tasks' data-load-trigger='chain:workflow-load'></div>\n        <div notification-center-pane='manuals' content-url='/user_manuals/for_referer'></div>\n      </div>\n    </div>\n  </div>\n</div>\n",function(){ChainNavPanel.MenuBuilder=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o;return n=function(a,b,c,d,e){return a?b.push(m(c,d,e)):void 0},m=function(a,b,c){return{label:b,url:c,id:"nav-"+a}},o=function(a,b,c,d){return d&&d.length>0?a.push({id:b,label:c,items:d}):void 0},e=function(a,b){var c;return c=[],n(b.permissions.view_orders,c,"order-search","Search","/orders?force_search=true"),n(b.permissions.edit_orders,c,"order-new","New","/orders/new"),n(b.permissions.view_vendor_portal,c,"vendor-portal","Vendor Portal","/vendor_portal"),o(a,"nav-cat-order","Order",c)},f=function(a,b){var c;return c=[],n(b.permissions.view_products,c,"product-search","Search","/products?force_search=true"),n(b.permissions.edit_products,c,"product-new","New","/products/new"),n(b.permissions.view_official_tariffs,c,"official-tariff-search","Search Tariffs","/official_tariffs?force_search=true"),n(b.permissions.view_official_tariffs,c,"official-tariff-browse","Browse Tariffs","/hts"),o(a,"nav-cat-product","Product",c)},h=function(a,b){var c;return c=[],n(b.permissions.view_shipments,c,"shipment-search","Search","/shipments?force_search=true"),n(b.permissions.edit_shipments,c,"shipment-new","New","/shipments/new"),o(a,"nav-cat-shipment","Shipment",c)},g=function(a,b){var c;return c=[],n(b.permissions.view_security_filings,c,"isf-search","Search","/security_filings?force_search=true"),o(a,"nav-cat-isf","Security Filing",c)},c=function(a,b){var c;return c=[],n(b.permissions.view_entries,c,"entry-sum-ca","Browse - CA","/entries/activity_summary/ca"),n(b.permissions.view_entries,c,"entry-sum-ca","Browse - US","/entries/activity_summary/us"),n(b.permissions.view_entries,c,"entry-search","Search","/entries?force_search=true"),n(b.permissions.view_entries,c,"entry-snapshot","Snapshot","/entries/bi"),o(a,"nav-cat-entry","Entry",c)},a=function(a,b){var c;return c=[],n(b.permissions.view_broker_invoices,c,"brok-inv-search","Search","/broker_invoices?force_search=true"),n(b.permissions.view_summary_statements,c,"brok-inv-stmnt-search","Summary Statements","/summary_statements"),n(b.permissions.edit_summary_statements,c,"brok-inv-stmnt-new","New Statement","/summary_statements/new"),o(a,"nav-cat-brok-inv","Broker Invoice",c)},l=function(a,b){var c;return c=[],n(b.permissions.view_vfi_invoices,c,"vfi-inv-search","Search","/vfi_invoices?force_search=true"),o(a,"nav-cat-vfi-inv","VFI Invoice",c)},b=function(a,b){var c;return c=[],n(b.permissions.view_drawback,c,"drawback-search","Search","/drawback_claims?force_search=true"),n(b.permissions.edit_drawback,c,"drawback-new","New","/drawback_claims/new"),n(b.permissions.upload_drawback,c,"drawback-upload","Upload","/drawback_upload_files"),o(a,"nav-cat-drawback","Drawback",c)},i=function(a,b){var c;return c=[],n(b.permissions.view_survey_responses,c,"survey-edit","View","/survey_responses"),n(b.permissions.view_surveys,c,"survey-view","Edit","/surveys"),o(a,"nav-cat-survey","Survey",c)},k=function(a,b){var c;return c=[],n(b.permissions.view_vendors,c,"vendor-view","View","/vendors"),n(b.permissions.create_vendors,c,"vendor-new","New","/vendors/new"),o(a,"nav-cat-vendor","Vendor",c)},j=function(a,b){var c;return c=[],n(b.permissions.view_trade_lanes,c,"trade-lane-view","View","/trade_lanes"),n(b.permissions.edit_trade_lanes,c,"trade-lane-new","New","/trade_lanes#/new"),o(a,"nav-cat-trade-lane","Trade Lane",c)},d=function(a,b){var c;return c=[],c.push(m("account","Account","/me")),c.push(m("custom-features","Custom Features","/custom_features")),c.push(m("dashboard","Dashboard","/dashboard_widgets")),c.push(m("reports","Reports","/report_results")),c.push(m("support","Support","/support_tickets")),c.push(m("tools","Tools","/tools")),c.push(m("uploads","Uploads","/imported_files")),c.push(m("set-homepage","Set Homepage","#")),c.push(m("log-out","Log Out","/logout")),a.push({id:"nav-cat-more",label:"more...",items:c})},{createMenuObject:function(m){var n;return n=[],f(n,m),e(n,m),h(n,m),g(n,m),c(n,m),a(n,m),l(n,m),b(n,m),i(n,m),k(n,m),j(n,m),d(n,m),{categories:n}}}}}.call(this),function(){ChainNavPanel.MenuWriter=function(){return{writeMenu:function(a,b){var c,d,e,f,g,h,i,j,k,l;for(d="",k=b.categories,e=0,h=k.length;h>e;e++){for(c=k[e],j="#"+c.id,d+="<div class='panel'>",d=d+"<div class='panel-heading'><h3 class='panel-title' data-toggle='collapse' data-target='"+j+"'><a href='javascript:void(0)'>"+c.label+"</a></h3></div><div class='panel-collapse collapse' id='"+c.id+"'><div class='list-group'>",l=c.items,g=0,i=l.length;i>g;g++)f=l[g],d=d+"<a href='"+f.url+"' class='list-group-item' id='"+f.id+"'>"+f.label+"</a>";d+="</div></div></div>"}return a.append(d)}}}}.call(this),function(){var a;a="undefined"!=typeof exports&&null!==exports?exports:this,a.ChainNotificationCenter={getMessageCount:function(a){return $.getJSON(a,function(a){return a>0?$(".message_envelope").each(function(){return $(this).html(""+a).addClass("messages")}):$(".message_envelope").each(function(){return $(this).html("").removeClass("messages")})})},initialize:function(a,b){return this.url="/messages/message_count?user_id="+a,$(document).ready(function(a){return function(){return a.initNotificationCenter(),a.getMessageCount(a.url),b>0?a.startPolling(b):void 0}}(this))},initWorkflowCallback:function(){return $(document).on("chain:workflow-load",function(a){return ChainWorkflow.initWorkflowButtons(function(a){return Chain.showNotificationCenterPane("tasks")}),$(".task-widget [rel-date]").each(function(){var a;return a=$(this),a.html(a.attr("rel-date-prefix")+moment(a.attr("rel-date")).fromNow())})})},initNotificationCenter:function(){return $('[data-toggle="notification-center"]').click(function(){return ChainNotificationCenter.toggleNotificationCenter()}),$("[notification-center-toggle-target]").on("click",function(){return ChainNotificationCenter.showNotificationCenterPane($(this).attr("notification-center-toggle-target"))}),$("#notification-center").on("click",".delete-message-btn",function(a){var b;return b=$(this).attr("message-id"),a.preventDefault(),window.confirm("Are you sure you want to delete this message?")?$.ajax({url:"/messages/"+b,type:"post",data:{_method:"delete"},success:function(){return $("#message-panel-"+b).fadeOut()}}):void 0}),$("#notification-center").on("click",".show-time-btn",function(a){var b;return b=$(this),b.html()===b.attr("title")?b.html("<span class='glyphicon glyphicon-time'></span>"):b.html(b.attr("title"))}),$("#notification-center").click(function(a){return a.target===this?ChainNotificationCenter.hideNotificationCenter():void 0}),$("#notification-center").on("show.bs.collapse",".panel-collapse",function(a){var b,c,d;return d=a.target,b=$(d).attr("message-id"),c=$("#message-panel-"+b),c.find(".message-read-icon").removeClass("glyphicon-chevron-right").addClass("glyphicon-chevron-down"),c.hasClass("unread")?(c.addClass("read").removeClass("unread"),$.get("/messages/"+b+"/read",function(){return ChainNotificationCenter.getMessageCount(ChainNotificationCenter.pollingUrl())})):void 0}),$("#notification-center").on("hide.bs.collapse",".panel-collapse",function(a){var b,c;return c=a.target,b=$(c).attr("message-id"),$("#message-panel-"+b+" .message-read-icon").removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-right")}),$("#notification-center").on("click",".notification-mark-all-read",function(a){return $.ajax({url:"/messages/read_all",success:function(){return $("#notification-center").find(".unread").each(function(){return $(this).removeClass("unread").addClass("read")}),ChainNotificationCenter.getMessageCount(ChainNotificationCenter.pollingUrl())}})}),$("#notification-center").on("chain:notification-load",'[notification-center-pane="messages"]',function(){return $('[notification-center-pane="messages"] .message-body a').addClass("btn").addClass("btn-xs").addClass("btn-primary")}),this.initWorkflowCallback()},pollingUrl:function(){return this.url},startPolling:function(a){return null!=this.intervalRegistration||0>=a?void 0:this.intervalRegistration=setInterval(function(a){return function(){return a.getMessageCount(a.url)}}(this),1e3*a)},stopPolling:function(){var a;return null!=this.intervalRegistration?(a=this.intervalRegistration,this.intervalRegistration=null,clearInterval(a)):void 0},toggleNotificationCenter:function(){return $("#notification-center").is(":visible")?ChainNotificationCenter.hideNotificationCenter():ChainNotificationCenter.showNotificationCenter()},showNotificationCenter:function(){return $("#notification-center").modal("show"),ChainNotificationCenter.showNotificationCenterPane("messages")},showNotificationCenterPane:function(a){var b;return $("[notification-center-pane]").hide(),$("[notification-center-toggle-target]").removeClass("btn-primary").addClass("btn-default"),$("[notification-center-toggle-target='"+a+"']").removeClass("btn-default").addClass("btn-primary"),b=$("[notification-center-pane='"+a+"']"),b.html('<div class="loader"></div>'),b.show(),$.ajax({url:b.attr("content-url"),data:{nolayout:"true"},success:function(a){var c;return c=b.attr("data-load-trigger"),b.html(a),b.trigger("chain:notification-load"),c?b.trigger(c):void 0},error:function(){return b.html("<div class='alert alert-danger'>We're sorry, an error occurred while trying to load this information.</div>")}})},hideNotificationCenter:function(){return $("#notification-center").modal("hide")}}}.call(this);