<div class="container" id="standard-order-template">
    <div class="row">
        <div class="col-md-12 text-center">
            <a ui-sref='main'><img src="/logo.png" alt="Logo"></a>
            <br />
            <h1>
                <small>Purchase Order</small>
                <br />
                {{order.ord_ord_num}}
            </h1>
        </div>
    </div>
    <div class="row">
        <div class="col-md-5">
            <div class="card">
                <div class="card-header">
                </div>
                <ul class='list-group'>
                    <li class='list-group-item'>
                        Issue Date <span class='float-right'>{{order.ord_ord_date}}</span>
                    </li>
                    <li class='list-group-item' ng-if='order.ord_window_start && order.ord_window_start==order.ord_window_end'>
                        Delivery Date <span class='float-right'>{{order.ord_window_start}}</span>
                    </li>
                    <li class='list-group-item' ng-if='order.ord_window_start && order.ord_window_start!=order.ord_window_end'>
                        Ship Window Start <span class='float-right'>{{order.ord_window_start}}</span>
                    </li>
                    <li class='list-group-item' ng-if='order.ord_window_end && order.ord_window_start!=order.ord_window_end'>
                        Ship Window End <span class='float-right'>{{order.ord_window_end}}</span>
                    </li>
                    <li class="list-group-item">
                        Vendor No.
                        <span class="float-right">{{order.ord_ven_syscode}}</span>
                    </li>
                    <li class="list-group-item">
                        Vendor Name
                        <span class="float-right">{{order.ord_ven_name}}</span>
                    </li>
                    <li class="list-group-item">
                        Currency
                        <span class="float-right">{{order.ord_currency}}</span>
                    </li>
                    <li class="list-group-item">
                        Terms of Payment
                        <span class="float-right">{{order.ord_payment_terms}}</span>
                    </li>
                    <li class="list-group-item">
                        Terms of Delivery
                        <span class="float-right">{{order.ord_terms}}</span>
                    </li>
                    <li class="list-group-item">
                        Delivery Location
                        <span class="float-right">{{order.ord_fob_point}}</span>
                    </li>
                </ul>
            </div>
            <div class="card">
                <div class="card-header">Order Status</div>
                <ul class='list-group'>
                    <li class='list-group-item'>
                        Business Rules
                        <span class='float-right'>
                            <chain-business-rules-basic-modal core-object='order' module-type='Order'></chain-business-rules-basic-modal>
                        </span>
                    </li>
                    <li class="list-group-item" ng-show='order[dictionary.fieldsByAttribute("label", "Docs Required",dictionary.fieldsByRecordType(dictionary.recordTypes.Order))[0].uid]'>
                        Docs Completed
                        <span class='float-right'>
                           <div ng-show='order[dictionary.field("*ord_docs_completed_by_username").uid]'>
                               {{order[dictionary.field("*ord_docs_completed_date").uid]}}
                           </div>
                           <div ng-show='!order[dictionary.field("*ord_docs_completed_by_username").uid]'>
                               No
                           </div>
                        </span>
                    </li>
                    <li class='list-group-item'>
                        Audit Initiated
                        <span class='float-right'>
                            <i class='fa fa-check-square text-success' ng-show='order[dictionary.fieldsByAttribute("label","Audit Initiated By",dictionary.fieldsByRecordType(dictionary.recordTypes.Order))[0].uid]>0'></i>
                            <i class="fa fa-square-o" ng-show='!order[dictionary.fieldsByAttribute("label","Audit Initiated By",dictionary.fieldsByRecordType(dictionary.recordTypes.Order))[0].uid]'></i>
                        </span>
                    </li>
                    <li class='list-group-item'>
                        Audit Completed
                        <span class='float-right'>
                            <i class='fa fa-check-square text-success' ng-show='order[dictionary.fieldsByAttribute("label","Audit Completed By",dictionary.fieldsByRecordType(dictionary.recordTypes.Order))[0].uid]>0'></i>
                            <i class="fa fa-square-o" ng-show='!order[dictionary.fieldsByAttribute("label","Audit Completed By",dictionary.fieldsByRecordType(dictionary.recordTypes.Order))[0].uid]'></i>
                        </span>
                    </li>
                    <li class='list-group-item text-right'>
                        <chain-state-toggle-buttons button-classes='btn-sm btn-primary' api-object-name='Order' object='order' toggle-callback='reload'></chain-state-toggle-buttons>
                    </li>
                </ul>
            </div>
        </div>
        <div class="col-md-7">
            <div class="card">
                <div class="card-header">Vendor Order Address</div>
                <div class="card-body">
                    <chain-address address='{{order.ord_order_from_address_full_address}}'></chain-address>
                </div>
            </div>
            <div class="card">
                <div class="card-header">Ship From Address</div>
                <div class="card-body">
                    <div class="text-warning" ng-show='order.permissions.can_edit && order.vendor_id == me.company_id && !order.ord_ship_from_full_address.length>0'>
                        Please select a ship from address using the Change button below.
                    </div>
                    <chain-address address='{{order.ord_ship_from_full_address}}'></chain-address>
                </div>
                <div class="card-footer text-right" ng-if='order.permissions.can_edit && order.vendor_id == me.company_id'>
                    <a ui-sref='selectShipFrom({id:order.id})' class='btn btn-primary' href="javscript:void(0);">Change</a>
                </div>
            </div>
            <div class="card" >
                <div class="card-header">Ship To Address</div>
                <div ng-if='order.order_lines.length > 0 && order.ord_ship_to_count==1' class="card-body">
                    <chain-address address="{{order.order_lines[0].ordln_ship_to_full_address}}"></chain-address>
                </div>
                <div ng-if='order.ord_ship_to_count > 1' class='card-body'>
                    <strong>Multi-Stop</strong>
                </div>
            </div>
            <div class="card" ng-if='order.available_tpp_survey_responses.length > 0'>
                <div class="card-header">Trade Preference Program Certification</h3>
                </div>
                <div class="card-body">
                    {{order.ord_tppsr_name}}
                    <div ng-if='!order.ord_tppsr_db_id' class="alert alert-info">No trade preference program selected.</div>
                </div>
                <div class="card-footer text-right">
                    <button class='btn btn-primary' ui-sref="selectTppSurveyResponse({id:order.id})">Change</button>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <table class="table table-bordered table-striped">
                    <thead>
                    <tr>
                        <th>Line Num</th>
                        <th>Article</th>
                        <th ng-if='order.ord_ship_to_count > 1'>Ship To</th>
                        <th>Quantity</th>
                        <th>UM</th>
                        <th>Unit Price</th>
                        <th>Net Amount</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat='ol in order.order_lines track by ol.id'>
                        <td>{{ol.ordln_line_number}}</td>
                        <td>
                            <small>{{ol.ordln_puid}}</small><br />
                            {{ol.ordln_pname}}
                        </td>
                        <td ng-if='order.ord_ship_to_count > 1'>
                            <chain-address address='{{ol.ordln_ship_to_full_address}}'></chain-address>
                        </td>
                        <td class='text-right numeric'>{{ol.ordln_ordered_qty}}</td>
                        <td>{{ol.ordln_unit_of_measure}}</td>
                        <td class='text-right numeric'>{{ol.ordln_ppu}}</td>
                        <td class='text-right numeric'>{{ol.ordln_total_cost}}</td>
                    </tr>
                    <tr>
                        <td class='text-right' colspan='5'>Total</td>
                        <td class='text-right numeric'>{{order.ord_total_cost}}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <chain-comments-panel parent="order" module-type="Order"></chain-comments-panel>
        </div>
        <div class="col-md-6">
            <chain-attachments-panel parent="order" module-type="Order"></chain-attachments-panel>
        </div>
    </div>
</div>
<div class="modal fade" id="mod_cant_be_accepted" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="">Pending Updates</h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            </div>
            <div class="modal-body">
                This order is does not have all data elements completed and cannot be accepted.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
