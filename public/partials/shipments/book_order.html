<chain-loading-wrapper loading-flag='{{loadingFlag}}'>
    <div class='container' ng-init="sbc.chooseBookingType('chooseBooking')" data-container-id="chooseBooking">
        <div class="row">
            <div class="col-md-12">
                <h1>Choose Type of Booking</h1>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3"><button ng-click="sbc.chooseBookingType('product')">Book by Product</button></div>
            <div class="col-md-3"><button ng-click="sbc.chooseBookingType('order')">Book by Order</button></div>
            <div class="col-md-3"><button ng-click="sbc.chooseBookingType('sku'); sbc.loadAvailableOrders();">Book by Order Line(SKU)</button></div>
            <div class="col-md-3"><button ng-click="sbc.chooseBookingType('container')">Book by Container</button></div>
        </div>
    </div>
    <div class='container' data-container-id="product">
        <div class="row booking-header-row">
            <div class="col-md-12">
                <h1>Book By Product</h1>
            </div>
        </div>
        <div class="row">
            <div class="col-md-2">
                <angucomplete-alt id='product_autocomplete' input-class='form-control' placeholder='Search for Products...' clear-selected="true" selected-object='sbc.onProductSelected' remote-url='/api/v1/products/autocomplete?n=' title-field='name' minlength='1' initial-value=''></angucomplete-alt>
            </div>
            <div class="col-md-10">
                <table class="table booking-table">
                    <tr>
                        <th>Product</th>
                        <th>Quantity</th>
                        <th>Cartons</th>
                        <th>Volume (CBMs)</th>
                        <th>Gross Weight (KGs)</th>
                        <th class="short-column"></th>
                    </tr>
                    <tr ng-repeat="line in sbc.lines">
                        <td>{{line.bkln_pname}}</td>
                        <td><input type='number' class="form-control" ng-model="line.bkln_quantity"></td>
                        <td><input type='number' class="form-control" ng-model="line.bkln_carton_qty"></td>
                        <td><input type='number' class="form-control" ng-model="line.bkln_cbms"></td>
                        <td><input type='number' class="form-control" ng-model="line.bkln_gross_kgs"></td>
                        <td><button class="btn btn-xs btn-danger" title="Delete Line" ng-click="sbc.removeLine(line)"><i class="fa fa-trash"></i></button></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <div class='container' data-container-id="order">
        <div class="row booking-header-row">
            <div class="col-md-12">
                <h1>Book By Order</h1>
            </div>
        </div>
        <div class="row">
            <div class="col-md-2">
                <angucomplete-alt id='order_autocomplete' input-class='form-control' placeholder='Search for Orders...' clear-selected="true" selected-object='sbc.onOrderSelected' remote-url='/api/v1/orders/autocomplete?n=' title-field='name' minlength='1' initial-value=''></angucomplete-alt>
            </div>
            <div class="col-md-10">
                <table class="table booking-table">
                    <tr>
                        <th>Order</th>
                        <th>Quantity</th>
                        <th>Cartons</th>
                        <th>Volume (CBMs)</th>
                        <th>Gross Weight (KGs)</th>
                        <th class="short-column"></th>
                    </tr>
                    <tr ng-repeat="line in sbc.lines">
                        <td>{{line.bkln_order_number}}</td>
                        <td><input type='number' class="form-control" ng-model="line.bkln_quantity"></td>
                        <td><input type='number' class="form-control" ng-model="line.bkln_carton_qty"></td>
                        <td><input type='number' class="form-control" ng-model="line.bkln_cbms"></td>
                        <td><input type='number' class="form-control" ng-model="line.bkln_gross_kgs"></td>
                        <td><button class="btn btn-xs btn-danger" title="Delete Line" ng-click="sbc.removeLine(line)"><i class="fa fa-trash"></i></button></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <div class='container' ng-init="" data-container-id="sku">
        <div class="row booking-header-row">
            <div class="col-md-12">
                <h1>Book by Order Line (SKU)</h1>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-2">
                <input type='text' ng-model='orderFilter' placeholder='Search orders' class='form-control input-sm'/>
                <div class='text-right'><small><a href='' ng-click='orderFilter=null'>clear</a></small></div>
                <br />
                <div ng-show='sbc.availableOrders.length == 0'>No orders found</div>
                <div class="btn-group-vertical" style="width:100%" data-toggle="buttons">
                    <label class="btn btn-md btn-default"
                           ng-repeat="ord in sbc.availableOrders | filter:orderFilter"
                           ng-class="{active:ord.id==sbc.activeOrder.id}"
                           ng-click="sbc.getOrder(ord.id);"><input type="radio" autocomplete="off"/>{{ord.ord_cust_ord_no}}</label>
                </div>
            </div>
            <div class="col-xs-10">
                <chain-loading-wrapper loading-flag='{{orderLoadingFlag}}'>
                    <div ng-show='sbc.activeOrder'>
                        <h2 style='margin-top:0'>Order: {{sbc.activeOrder.ord_cust_ord_no}}</h2>
                        <table class='table booking-table'>
                            <thead>
                            <tr>
                                <th class="short-column">Line</th>
                                <th class="short-column">Part</th>
                                <th>SKU</th>
                                <th>Quantity</th>
                                <th>Cartons</th>
                                <th>Volume (CBMs)</th>
                                <th>Gross Weight (KGs)</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat='line in sbc.activeOrder.order_lines'>
                                <td>{{line.ordln_line_number}}</td>
                                <td>{{line.ordln_puid}}</td>
                                <td>{{line.ordln_sku}}</td>
                                <td><input ng-model='line.ordln_ordered_qty' class='form-control'/></td>
                                <td><input class="form-control" ng-model="line.bkln_carton_qty"></td>
                                <td><input class="form-control" ng-model="line.bkln_cbms"></td>
                                <td><input class="form-control" ng-model="line.bkln_gross_kgs"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </chain-loading-wrapper>
            </div>
        </div>
    </div>
    <div class='container' data-container-id="container">
        <div class="row booking-header-row">
            <div class="col-md-12">
                <h1>Book By Container</h1>
            </div>
        </div>
        <div class="row">
            <div class="col-md-2">
                <div class="btn-group-vertical" style="width:100%">
                    <a role="button" class="btn btn-md btn-default"
                           ng-repeat="value in ['Small','Medium','Large']"
                           ng-click="sbc.onContainerSelected(value);">{{value}}</a>
                </div>
            </div>
            <div class="col-md-10">
                <table class="table booking-table">
                    <tr>
                        <th>Container Size</th>
                        <th>Quantity</th>
                        <th>Cartons</th>
                        <th>Volume (CBMs)</th>
                        <th>Gross Weight (KGs)</th>
                        <th class="short-column"></th>
                    </tr>
                    <tr ng-repeat="line in sbc.lines">
                        <td>{{line.bkln_container_size}}</td>
                        <td><input type='number' class="form-control" ng-model="line.bkln_quantity"></td>
                        <td><input type='number' class="form-control" ng-model="line.bkln_carton_qty"></td>
                        <td><input type='number' class="form-control" ng-model="line.bkln_cbms"></td>
                        <td><input type='number' class="form-control" ng-model="line.bkln_gross_kgs"></td>
                        <td><button class="btn btn-xs btn-danger" title="Delete Line" ng-click="sbc.removeLine(line)"><i class="fa fa-trash"></i></button></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</chain-loading-wrapper>
<div chain-action-bar>
    <button class='btn btn-default' ng-click='sbc.saveLines()' ng-show='sbc.lines.length > 0'>Save</button>
    <button class='btn btn-default' ng-click='sbc.cancel()'>Cancel</button>
</div>