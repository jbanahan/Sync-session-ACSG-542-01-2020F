<%content_for :javascript do -%>
$(function() {
  $(document).ready(function() {
    $("#btn_tour").click(function() {
      Chain.showNavTour();
    });
  });
});
<%end-%>
<%content_for :action_bar do -%>
  <span id='nav-help-anchor'>&nbsp;</span>
  <%unless current_user.search_setups.empty? -%>
    <button class='btn_link' link_to='<%=edit_dashboard_widgets_path%>' title='Setup'><i class='fa fa-cogs'></i></button>
  <%end-%>
<%end-%>
<div id='ng-app' ng-app='DashboardApp'>
  <div chain-messages errors='errors' notices='notices'></div>
  <%if @widgets.blank? -%>
    <div class='container'>
      <div class='row'>
        <div class='col-md-12 jumbotron'>
          <h1>Welcome!</h1>
          <% if current_user.search_setups.empty? -%>
            <p>This is your personal dashboard. Once you've setup some searches, you'll be able to add them here.</p>
          <% elsif @widgets.empty? -%>
            <p>Click the setup link at the bottom of the page to add some of your searches to your dashboard.</p>
          <% end -%>
          <p>
            <button id='btn_tour' class='btn btn-lg btn-primary'>Click for a quick tour</button>
          </p>
        </div>
      </div>
    </div>
  <%else-%>
    <h1 class='text-center'>Dashboard</h1>
    <%@widgets.each do |w| -%>
      <dashboard-widget class='widget_box' widget-id='<%=w.search_setup_id%>'></dashboard-widget>
    <%end -%>
  <%end -%>
</div>
