<%content_for :action_bar do %>
  <% if current_user.admin? %>
    <% if params[:show_all] %>
      <button class='btn_link' link_to='<%=report_results_path%>'>Only My Reports</button>
    <% else %>
      <button class='btn_link' link_to='<%=report_results_path+"?show_all=true"%>'>All Users</button>
    <% end %>
  <% end %>
<% end %>
<% if @show_basic -%>
<h2>Run A Basic Report</h2>
<table class='detail_table'>
  <%if current_user.company.master?%>
    <tr class='hover'><td><%=link_to "Stale Tariffs", reports_show_stale_tariffs_path%></td>
    <td>Shows all products with tariff numbers that are no longer valid.</td></tr>

    <tr class='hover'><td><%=link_to "Tariff Comparison", reports_show_tariff_comparison_path%></td>
    <td>Compares two tariff files for the same country and shows you the HTS numbers that were added, removed, or changed.</td></tr>
  <%end%>
  <% if OpenChain::Report::POAExpiration.permission? current_user %>
    <tr class='hover'><td><%=link_to "POA Expiration", reports_show_poa_expirations_path%></td>
    <td>Shows all companies with Power of Attorneys expiring by a given date.</td></tr>
  <% end %>
  <%if current_user.view_entries?%>
    <tr class='hover'><td><%=link_to "Containers Released", reports_show_containers_released_path%></td>
    <td>Shows all containers released in a date range.</td></tr>
  <%end%>
  <%if current_user.company.master? && !LinkableAttachment.where("1=1").empty? %>
    <tr class='hover'><td><%=link_to "Attachments Not Matched", reports_show_attachments_not_matched_path%></td>
    <td>Shows all uploaded attachments not matched to items.</td></tr>
  <%end%>
  <%if current_user.company.master? && (!LinkedAttachment.where(attachable_type: "Product").first.nil? || !Attachment.where(attachable_type: "Product").first.nil?)%>
    <tr class='hover'><td><%=link_to "Products Without Attachments", reports_show_products_without_attachments_path%></td>
    <td>Shows all products without attachments.</td></tr>
  <%end%>
  <%if current_user.company.master? && !SyncRecord.where(syncable_type: "Product").first.nil? -%>
    <tr class='hover'><td><%=link_to "Product Sync Problems", reports_show_product_sync_problems_path%></td>
    <td>Shows all products out of sync with remote systems.</td></tr>
  <%end-%>
  <%if OpenChain::Report::PpqByPoReport.permission? current_user-%>
    <tr class='hover'><td><%=link_to "PPQ By PO Report", reports_show_ppq_by_po_report_path%></td>
    <td>Shows PPQ data submitted for the entries covering a list of POs.</td></tr>
  <%end-%>
  <%if OpenChain::Report::AscenaActualVsPotentialFirstSaleReport.permission? current_user%>
    <tr class='hover'><td><%=link_to "Ascena Actual vs Potential First Sale Report", reports_show_ascena_actual_vs_potential_first_sale_report_path%></td>
    <td>Compares actual and potential vendor savings for the previous fiscal month, fiscal season-to-date, and fiscal year-to-date.</td></tr>
  <%end-%>
  <%if OpenChain::Report::DailyFirstSaleExceptionReport.permission? current_user-%>
    <tr class='hover'><td><%=link_to "Ascena Daily First Sale Exception Report", reports_show_daily_first_sale_exception_report_path%></td>
    <td>Ascena Daily First Sale Exception report.</td></tr>
  <%end-%>
  <%if OpenChain::CustomHandler::Ascena::AscenaDutySavingsReport.permission? current_user-%>
    <tr class='hover'><td><%=link_to "Ascena Duty Savings Report", reports_show_ascena_duty_savings_report_path%></td>
    <td>Shows duty savings for a fiscal month.</td></tr>
  <%end-%>
  <%if OpenChain::Report::AscenaEntryAuditReport.permission? current_user-%>
    <tr class='hover'><td><%=link_to "Ascena Entry Audit Report", reports_show_ascena_entry_audit_report_path%></td>
    <td>Shows combination of Ascena and PO data.</td></tr>
  <%end-%>
  <%if OpenChain::Report::DrawbackExportsWithoutImports.permission? current_user-%>
    <tr class='hover'><td><%=link_to "Drawback Exports Without Imports", reports_show_drawback_exports_without_imports_path%></td>
    <td>Shows all drawback exports without matching imports by part number. Export Date must be greater than import date for lines to match.</td></tr>
  <%end-%>
  <%if OpenChain::Report::DasBillingSummary.permission? current_user-%>
    <tr class='hover'><td><%=link_to "DAS Canada Billing Summary", reports_show_das_billing_summary_path%></td>
    <td>DAS Billing Summary report.</td></tr>
  <%end-%>
  <%if OpenChain::Report::DutySavingsReport.permission? current_user-%>
    <tr class='hover'><td><%=link_to "Duty Savings Report", reports_show_duty_savings_report_path%></td>
    <td>Duty Savings report.</td></tr>
  <%end-%>
  <%if OpenChain::Report::EddieBauerStatementSummary.permission? current_user-%>
    <tr class='hover'><td><%=link_to "Eddie Bauer Statement Summary", reports_show_eddie_bauer_statement_summary_path%></td>
    <td>Eddie Bauer custom A/P Due Customs Report</td></tr>
  <%end-%>
  <%if OpenChain::Report::EddieBauerCaStatementSummary.permission? current_user-%>
    <tr class='hover'><td><%=link_to "Eddie Bauer CA Statement Summary", reports_show_eddie_bauer_ca_statement_summary_path%></td>
    <td>Eddie Bauer CA custom A/P Due Customs Report</td></tr>
  <%end-%>
  <%if OpenChain::Report::FootLockerBillingSummary.permission? current_user-%>
    <tr class='hover'><td><%=link_to "Foot Locker US Billing Summary", reports_show_foot_locker_billing_summary_path%></td>
    <td>Foot Locker US Billing Summary report.</td></tr>
  <%end-%>
  <%if OpenChain::Report::FootLockerCaBillingSummary.permission? current_user-%>
    <tr class='hover'><td><%=link_to "Foot Locker CA Billing Summary", reports_show_foot_locker_ca_billing_summary_path%></td>
    <td>Foot Locker CA Billing Summary report.</td></tr>
  <%end-%>
  <%if OpenChain::Report::JJillWeeklyFreightSummaryReport.permission? current_user-%>
    <tr class='hover'><td><%=link_to "J Jill Weekly Freight Summary", reports_show_j_jill_weekly_freight_summary_path%></td>
    <td>J Jill Weekly Freight Summary report.</td></tr>
  <%end-%>
  <%if OpenChain::Report::MarcJacobsFreightBudget.permission? current_user-%>
    <tr class='hover'><td><%=link_to "Marc Jacobs Freight Budget", reports_show_marc_jacobs_freight_budget_path%></td>
    <td>Marc Jacobs Monthly Freight Budget</td></tr>
  <%end-%>
  <%if OpenChain::Report::KitchenCraftBillingReport.permission? current_user-%>
    <tr class='hover'><td><%=link_to "KitchenCraft Billing", reports_show_kitchencraft_billing_path%></td>
    <td>KitchenCraft Monthly Billing Report</td></tr>
  <%end-%>
  <%if OpenChain::Report::LandedCostReport.permission? current_user-%>
    <tr class='hover'><td><%=link_to "Landed Cost", reports_show_landed_cost_path%></td>
    <td>Assembles Per Unit Landed Cost Data for a single customer over a specified time span.</td></tr>
  <%end-%>
  <%if OpenChain::Report::JCrewBillingReport.permission? current_user-%>
    <tr class='hover'><td><%=link_to "J Crew Billing Report", reports_show_jcrew_billing_path%></td>
    <td>J Crew Weekly Billing Report</td></tr>
  <%end-%>
  <%if OpenChain::Report::HmStatisticsReport.permission? current_user-%>
    <tr class='hover'><td><%=link_to "H&M Statistics Report", reports_show_hm_statistics_path%></td>
    <td>H&amp;M Statistics Report</td></tr>
  <%end-%>
  <%if OpenChain::Report::HmOkLog.permission? current_user-%>
    <tr class='hover'><td><%=link_to "H&M OK Log", reports_show_hm_ok_log_path%></td>
    <td>H&amp;M OK Log</td></tr>
  <%end-%>
  <%if OpenChain::Report::AllianceDeferredRevenueReport.permission? current_user-%>
    <tr class='hover'><td><%=link_to "Deferred Revenue", reports_show_deferred_revenue_path%></td>
    <td>Deferred Revenue for Breakbulk Files on a specific date.</td></tr>
  <%end-%>
  <%if OpenChain::Report::PvhBillingSummary.permission? current_user-%>
    <tr class='hover'><td><%=link_to "PVH Billing Summary", reports_show_pvh_billing_summary_path%></td>
    <td>Billing information for invoices.</td></tr>
  <%end-%>
  <%if OpenChain::Report::PvhContainerLogReport.permission? current_user-%>
    <tr class='hover'><td><%=link_to "PVH Container Log", reports_show_pvh_container_log_path%></td>
    <td>List PVH Container information relative to arrival dates.</td></tr>
  <%end-%>
  <%if OpenChain::Report::SgDutyDueReport.permission? current_user-%>
    <tr class='hover'><td><%=link_to "SG Duty Due Report", reports_show_sg_duty_due_report_path%></td>
    <td>List all outstanding duty owed (PDF).</td></tr>
  <%end-%>
  <%if OpenChain::Report::TicketTrackingReport.permission? current_user-%>
    <tr class='hover'><td><%=link_to "Ticket Tracking Report", reports_show_ticket_tracking_report_path%></td>
    <td>Shows Jira support tickets with corresponding VFI Track entry data.</td></tr>
  <%end-%>
  <%if OpenChain::Report::MonthlyEntrySummation.permission? current_user-%>
    <tr class='hover'><td><%=link_to "Monthly Entry Summation", reports_show_monthly_entry_summation_path%></td>
    <td>Sums entry data by month.</td></tr>
  <%end-%>
  <%if OpenChain::Report::EntryContainerCostBreakdown.permission? current_user-%>
    <tr class='hover'><td><%=link_to "Container Cost Breakdown", reports_show_container_cost_breakdown_path%></td>
    <td>Basic Container-based Landed Cost report.</td></tr>
  <%end-%>
  <%if current_user.view_drawback?%>
    <tr class='hover'><td><%=link_to "Drawback Audit Report", reports_show_drawback_audit_report_path%></td>
    <td>Shows all drawback claims.</td></tr>
  <%end%>
  <%if OpenChain::Report::RlTariffTotals.permission? current_user-%>
    <tr class='hover'><td><%=link_to "Ralph Lauren Tariff Totals", reports_show_rl_tariff_totals_path%></td>
    <td>Show Ralph Lauren tariff totals over a specified time span.</td></tr>
  <%end-%>
  <%if OpenChain::Report::EddieBauerCaK84Summary.permission? current_user-%>
    <tr class='hover'><td><%=link_to "Eddie Bauer CA K84 Summary", reports_show_eddie_bauer_ca_k84_summary_path%></td>
    <td>Shows Eddie Bauer Canadian K84 purchase orders.</td></tr>
  <%end-%>
  <%if OpenChain::Report::LlProdRiskReport.permission? current_user-%>
    <tr class='hover'><td><%=link_to "Lumber Liquidators Product Risk Report", reports_show_ll_prod_risk_report_path%></td>
    <td>Shows all products requiring a risk assignment.</td></tr>
  <%end-%>
  <%if OpenChain::CustomHandler::LumberLiquidators::LumberDhlOrderPushReport.permission? current_user-%>
    <tr class='hover'><td><%=link_to "Lumber Liquidators DHL PO Push Report", reports_show_ll_dhl_order_push_report_path%></td>
    <td>Shows all orders requiring push to DHL.</td></tr>
  <%end-%>
  <%if OpenChain::CustomHandler::JCrew::JCrewDrawbackImportsReport.permission? current_user-%>
    <tr class='hover'><td><%=link_to "J Crew Drawback Imports Report", reports_show_j_crew_drawback_imports_report_path%></td>
    <td>Shows drawback information from imports.</td></tr>
  <%end-%>
  <%if OpenChain::Report::UaDutyPlanningReport.permission?(current_user)%>
    <tr class='hover'><td><%=link_to "UA Duty Planning Report", reports_show_ua_duty_planning_report_path%></td>
    <td>Shows planned duty rates including free trade agreements.</td></tr>
  <%end%>
  <%if OpenChain::CustomHandler::LumberLiquidators::LumberActualizedChargesReport.permission?(current_user)%>
    <tr class='hover'><td><%=link_to "Lumber Actualized Charges Report", reports_show_lumber_actualized_charges_report_path%></td>
    <td>Shows actualized entry charges on a per container basis.</td></tr>
  <%end%>
  <%if OpenChain::Report::EntriesWithHoldsReport.permission?(current_user)%>
    <tr class='hover'><td><%=link_to "US Customs Hold Report", reports_show_entries_with_holds_report_path%></td>
    <td>Shows entries that have had US Customs holds/exams applied to them.</td></tr>
  <%end%>
  <%if OpenChain::CustomHandler::Polo::PoloJiraEntryReport.permission?(current_user)%>
    <tr class='hover'><td><%=link_to "Polo Jira Report", reports_show_rl_jira_report_path%></td>
    <td>Reports on Ralph Lauren Jira support issues.</td></tr>
  <%end%>
  </table>
<% end -%>
<% unless @customizable_reports.blank? -%>
<h2>Create A Customizable Report</h2>
<table class='detail_table'>
  <% @customizable_reports.each do |cr| -%>
    <tr class='hover'><td><%=link_to cr.template_name, new_custom_report_path(:type=>cr.name)%></td><td><%=cr.description%></td></tr>
  <% end -%>
</table>
<% end -%>
<% unless @current_custom_reports.blank? -%>
<h2>Manage Customizable Reports</h2>
<table class='detail_table'>
  <thead>
    <tr>
      <th>
        Name
      </th>
      <th>
        Type
      </th>
      <th>
        Created At
      </th>
    </tr>
  </thead>
  <tbody>
    <% @current_custom_reports.each do |cust| -%>
      <tr><td><%=link_to cust.name, cust.becomes(CustomReport)%></td><td><%=cust.class.template_name%></td><td><%=cust.created_at%></td></tr>
    <% end -%>
  </tbody>
</table>
<% end -%>
<h2>Report You've Run</h2>
<table class='detail_table'>
  <thead><tr><th>&nbsp;</th><th>Name</th><th>Run At</th><%if params[:show_all]%><th>Run By</th><%end%><th>Status</th></tr></thead>
  <tbody>
    <% @report_results.each do |r| %>
      <tr class='hover'>
      <td><%=link_to "Details", r%><%if r.report_data_file_name %> | <%=link_to "Download", download_report_result_path(r)%><%end%></td>
      <td><%=r.name%></td>
      <td><%=r.run_at%></td>
      <%if params[:show_all]%><td><%=r.run_by.full_name%></td><%end%>
      <td><%=r.status%></td></tr>
    <%end%>
  </tbody>
</table>
<%=will_paginate @report_results%>
