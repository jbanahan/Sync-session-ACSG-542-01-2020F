<div class="container">
  <div class="row">
    <div class="col-md-12">
      <chain-panel panel-title='Errors' panel-message="errorHandler.errorMessage" panel-type='panel-danger'></chain-panel>
    </div>
  </div>
</div>
<chain-loading-wrapper loading-flag='{{loadingFlag}}'>
  <div class='container'>
    <div class="row">
      <div class="col-md-12">
        <h1>315 Configurations</h1>
      </div>
    </div>
    <table class="table table-striped">
      <thead>
        <tr>
          <th>&nbsp;</th>
          <th>* Customer</th>
          <th>Enabled?</th>
          <th>Status</th>
          <th>Source</th>
          <th>Events</th>
          <th>Output Format</th>
        </tr>
      </thead>
      <tfoot>
        <tr>
          <th colspan="7">* Indicates use of Parent System Code in place of Customer Number</th>
        </tr>
      </tfoot>
      <tbody>
        <tr ng-repeat="config in milestoneConfigs">
          <td><button type="button" class="btn btn-secondary" ng-click="showConfig(config.milestone_notification_config)">Edit</button></td>
          <td>{{config.milestone_notification_config.parent_system_code ? ("*" + config.milestone_notification_config.parent_system_code) : config.milestone_notification_config.customer_number}}</td>
          <td>{{config.milestone_notification_config.enabled ? "Yes" : "No"}}</td>
          <td>{{config.milestone_notification_config.testing ? "Testing" : "Production"}}</td>
          <td>{{moduleTypes[config.milestone_notification_config.module_type]}}</td>
          <td>
              <ul ng-show="config.milestone_notification_config.setup_json && config.milestone_notification_config.setup_json.milestone_fields.length > 0">
                <li ng-repeat="event in config.milestone_notification_config.setup_json.milestone_fields">
                  {{event.label}} - ({{event.event_code}})
                </li>
              </ul>
          </td>
          <td>{{outputStyle(config.milestone_notification_config.output_style)}}</td>
        </tr>
      </tbody>
    </table>
</chain-loading-wrapper>
<div chain-action-bar>
  <button class="btn btn-secondary btn_link" link_to="<%=Rails.application.routes.url_helpers.settings_path%>">Back</button> 
  <button class='btn btn-secondary' ng-click='newConfig()'>New</button>
</div>
